<script>
  if (screen.width <= 768) {  // Adjust the screen width as per your needs
      document.querySelector('meta[name="viewport"]').setAttribute('content', 'width=device-width, initial-scale=2');
      // Adjust the initial-scale value as per your needs
  }
</script>

<!-- Firebase JavaScript SDK -->
<script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-database.js"></script>

<!-- Your Firebase configuration -->
<script>
// Replace this with your actual Firebase configuration
var firebaseConfig = {
  apiKey: "AIzaSyCMRFY1FCRVLWZXl8EXKAJefBsyloaE4os",
  authDomain: "notes-f8588.firebaseapp.com",
  databaseURL: "https://notes-f8588-default-rtdb.europe-west1.firebasedatabase.app/",
  projectId: "notes-f8588",
  storageBucket: "notes-f8588.appspot.com",
  messagingSenderId: "106653771180",
  appId: "1:106653771180:web:f9414f2731fb9953664609"
};

// Initialize Firebase
firebase.initializeApp(firebaseConfig);
</script>

<br>
<input type="text" id="messageInput" placeholder="Enter your message" style="margin-top: 40px; margin-left: 20px;">
<button onclick="sendMessage()">Send</button>

<ul id="messageList" style="margin-top: 40px; margin-left: 20px;"></ul>

<p id="statusMessage" style="margin-top: 20px; margin-left: 20px;"></p> <!-- This will display the status message -->

<p id="messageCounter" style="margin-top: 20px; margin-left: 20px;">Messages: 0</p> <!-- This will display the message count -->

<script>
function sendMessage() {
  // Get the message from the input field
  var message = document.getElementById("messageInput").value;

  // Get a reference to the Firebase database
  var database = firebase.database();

  // Generate a unique key for the message
  var messageKey = database.ref().child("messages").push().key;

  // Create a data object with only the message field
  var messageData = {
      message: message
  };

  // Save the message to the Firebase database
  var updates = {};
  updates["/messages/" + messageKey] = messageData;
  database.ref().update(updates).then(function() {
      // Clear the input field
      document.getElementById("messageInput").value = "";

      // Display the "Message received" text
      document.getElementById("statusMessage").textContent = "Message received";

      // Update the message counter (this will be handled by the listener below)

  }).catch(function(error) {
      // Handle any errors that occur during the update
      console.error("Error saving message:", error);
  });
}

// Listen for changes in the "messages" node to update the counter
var messagesRef = firebase.database().ref("messages");
messagesRef.on("value", function(snapshot) {
  // Update the message counter
  var messageCount = snapshot.numChildren();
  document.getElementById("messageCounter").textContent = "Messages: " + messageCount;
});

// Function to delete a message
function deleteMessage(messageKey) {
  // Get a reference to the specific message in the database
  var messageRef = firebase.database().ref("messages/" + messageKey);

  // Remove the message from the database
  messageRef.remove();
}
</script>